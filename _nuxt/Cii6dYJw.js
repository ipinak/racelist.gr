import{_ as F,N as S}from"./DME8v0iI.js";import{i as b,j as B,k as j,c as n,o as s,a as t,t as f,F as v,f as g,l as k,m as N,n as Y,b as w}from"./DyaDN0GN.js";const L={class:"text-center my-6"},R={class:"flex justify-center items-center gap-4 mb-4"},V={class:"text-lg font-bold"},A={class:"w-full max-w-4xl mx-auto bg-white border border-gray-200 rounded shadow"},I={key:0},G={key:1,class:"w-2 h-2 bg-[#ff00ff] rounded-full absolute bottom-1 left-1/2 -translate-x-1/2"},H={__name:"Calendar",props:{races:Array},emits:["updateDate"],setup(p,{emit:r}){const u=r,d=p,e=b(new Date),a=["Κυρ.","Δευτ","Τρ.","Τετ.","Πεμ.","Παρ.","Σατ."],o=B(()=>e.value.toLocaleString("el-GR",{month:"long",year:"numeric"})),M=B(()=>{const h=e.value.getFullYear(),m=e.value.getMonth(),c=new Date(h,m,1).getDay(),_=new Date(h,m+1,0).getDate(),l=[];let i=1;for(let D=0;D<6;D++){const x=[];for(let y=0;y<7;y++)D===0&&y<c||i>_?x.push(""):(x.push(i),i++);l.push(x)}return l}),C=h=>{var l;if(!h)return!1;const m=e.value.getFullYear(),c=e.value.getMonth()+1,_=`${m}-${String(c).padStart(2,"0")}-${String(h).padStart(2,"0")}`;return(l=d.races)==null?void 0:l.some(i=>i.Date===_)},$=()=>{e.value.setMonth(e.value.getMonth()-1),e.value=new Date(e.value)},E=()=>{e.value.setMonth(e.value.getMonth()+1),e.value=new Date(e.value)};return j(e,()=>{u("updateDate",e.value)},{immediate:!0}),(h,m)=>(s(),n("div",L,[t("div",R,[t("button",{onClick:$,class:"bg-[#9BBEC4] text-white p-3 rounded hover:bg-[#ff00ff]"}," ◀ Προηγούμενος "),t("span",V,f(o.value),1),t("button",{onClick:E,class:"bg-[#9BBEC4] text-white p-3 rounded hover:bg-[#ff00ff]"}," Επόμενος ▶ ")]),t("table",A,[t("thead",null,[t("tr",null,[(s(),n(v,null,g(a,c=>t("th",{key:c,class:"bg-[#9BBEC4] p-2 text-gray-800"},f(c),1)),64))])]),t("tbody",null,[(s(!0),n(v,null,g(M.value,(c,_)=>(s(),n("tr",{key:_},[(s(!0),n(v,null,g(c,(l,i)=>(s(),n("td",{key:i,class:"h-16 border border-gray-200 text-center relative"},[l?(s(),n("span",I,f(l),1)):k("",!0),C(l)?(s(),n("div",G)):k("",!0)]))),128))]))),128))])])]))}},U={class:"text-center"},q={key:0},z={__name:"RaceList",props:{races:Array,currentDate:Date},setup(p){const r=p,u={no_races:"Κανένας αγώνας"},d=B(()=>{const e=new Date;return e.setHours(0,0,0,0),r.races.filter(a=>new Date(a.Date)>e).filter(a=>{const o=new Date(a.Date);return o.getFullYear()===r.currentDate.getFullYear()&&o.getMonth()===r.currentDate.getMonth()}).sort((a,o)=>new Date(a.Date)-new Date(o.Date))});return(e,a)=>(s(),n("div",null,[t("ul",U,[d.value.length===0?(s(),n("li",q,f(u.no_races),1)):k("",!0),(s(!0),n(v,null,g(d.value,o=>(s(),N(F,{key:o.ID,race:o},null,8,["race"]))),128))])]))}},J={class:"text-3xl text-center text-[#9BBEC4] my-6"},K={class:"flex justify-center"},Q={__name:"index",setup(p){const r=b([]),u=b(new Date),d=e=>{u.value=e};return Y(async()=>{const e=await fetch("https://racelist.gr/min.races.json");r.value=await e.json()}),(e,a)=>(s(),n("div",null,[t("h2",J," Ημερολόγιο Αγώνων για το "+f(u.value.getFullYear()),1),w(H,{races:r.value,onUpdateDate:d},null,8,["races"]),a[0]||(a[0]=t("h2",{class:"text-2xl text-center my-6 text-[#9BBEC4]"},"Ερχόμενοι αγώνες",-1)),w(z,{races:r.value,currentDate:u.value},null,8,["races","currentDate"]),a[1]||(a[1]=t("h2",{class:"text-xl text-center my-6 text-[#9BBEC4]"}," Ενημερωθείτε για νέους αγώνες ",-1)),t("div",K,[w(S)])]))}};export{Q as default};
