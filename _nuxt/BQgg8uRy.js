import{_ as S,N as E}from"./BC5xDQiX.js";import{_ as j}from"./BsnG5XGP.js";import{i as b,j as k,k as N,c as n,o as a,a as s,b as v,t as D,F as g,f as x,l as B,m as Y,n as L}from"./jiEJNA7a.js";const R={class:"text-center my-6"},V={class:"flex justify-center items-center gap-4 mb-4"},A={class:"text-lg font-bold"},I={class:"w-full max-w-4xl mx-auto bg-white border border-gray-200 rounded shadow"},G={key:0},H={key:1,class:"w-2 h-2 bg-[#a4c5ca] rounded-full absolute bottom-1 left-1/2 -translate-x-1/2"},U={__name:"Calendar",props:{races:Array},emits:["updateDate"],setup(f,{emit:r}){const u=r,d=f,e=b(new Date),t=["Κυρ.","Δευτ","Τρ.","Τετ.","Πεμ.","Παρ.","Σατ."],o=k(()=>e.value.toLocaleString("el-GR",{month:"long",year:"numeric"})),M=k(()=>{const m=e.value.getFullYear(),h=e.value.getMonth(),_=new Date(m,h,1).getDay(),c=new Date(m,h+1,0).getDate(),i=[];let l=1;for(let p=0;p<6;p++){const y=[];for(let w=0;w<7;w++)p===0&&w<_||l>c?y.push(""):(y.push(l),l++);i.push(y)}return i}),$=m=>{var i;if(!m)return!1;const h=e.value.getFullYear(),_=e.value.getMonth()+1,c=`${h}-${String(_).padStart(2,"0")}-${String(m).padStart(2,"0")}`;return(i=d.races)==null?void 0:i.some(l=>l.Date===c)},C=()=>{e.value.setMonth(e.value.getMonth()-1),e.value=new Date(e.value)},F=()=>{e.value.setMonth(e.value.getMonth()+1),e.value=new Date(e.value)};return N(e,()=>{u("updateDate",e.value)},{immediate:!0}),(m,h)=>{const _=j;return a(),n("div",R,[s("div",V,[v(_,{title:"◀ Προηγούμενος",onClick:C}),s("span",A,D(o.value),1),v(_,{title:"Επόμενος ▶",onClick:F})]),s("table",I,[s("thead",null,[s("tr",null,[(a(),n(g,null,x(t,c=>s("th",{key:c,class:"bg-[#9BBEC4] p-2 text-gray-800"},D(c),1)),64))])]),s("tbody",null,[(a(!0),n(g,null,x(M.value,(c,i)=>(a(),n("tr",{key:i},[(a(!0),n(g,null,x(c,(l,p)=>(a(),n("td",{key:p,class:"h-16 border border-gray-200 text-center relative"},[l?(a(),n("span",G,D(l),1)):B("",!0),$(l)?(a(),n("div",H)):B("",!0)]))),128))]))),128))])])])}}},q={class:"text-center"},z={key:0},J={__name:"RaceList",props:{races:Array,currentDate:Date},setup(f){const r=f,u={no_races:"Κανένας αγώνας"},d=k(()=>{const e=new Date;return e.setHours(0,0,0,0),r.races.filter(t=>new Date(t.Date)>e).filter(t=>{const o=new Date(t.Date);return o.getFullYear()===r.currentDate.getFullYear()&&o.getMonth()===r.currentDate.getMonth()}).sort((t,o)=>new Date(t.Date)-new Date(o.Date))});return(e,t)=>(a(),n("div",null,[s("ul",q,[d.value.length===0?(a(),n("li",z,D(u.no_races),1)):B("",!0),(a(!0),n(g,null,x(d.value,o=>(a(),Y(S,{key:o.ID,race:o},null,8,["race"]))),128))])]))}},K={class:"text-3xl text-center text-[#9BBEC4] my-6"},O={class:"flex justify-center"},W={__name:"index",setup(f){const r=b([]),u=b(new Date),d=e=>{u.value=e};return L(async()=>{const e=await fetch("https://racelist.gr/min.races.json");r.value=await e.json()}),(e,t)=>(a(),n("div",null,[s("h2",K," Ημερολόγιο Αγώνων για το "+D(u.value.getFullYear()),1),v(U,{races:r.value,onUpdateDate:d},null,8,["races"]),t[0]||(t[0]=s("h2",{class:"text-2xl text-center my-6 text-[#9BBEC4]"},"Ερχόμενοι αγώνες",-1)),v(J,{races:r.value,currentDate:u.value},null,8,["races","currentDate"]),t[1]||(t[1]=s("h2",{class:"text-xl text-center my-6 text-[#9BBEC4]"}," Ενημερωθείτε για νέους αγώνες ",-1)),s("div",O,[v(E)])]))}};export{W as default};
